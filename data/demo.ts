// Demo data for testing the application
import { Video, AdsterraAd } from '@/types/database';

export const demoVideos: Video[] = [
  {
    id: 'video_1',
    title: 'Amazing Nature Documentary',
    description: 'Explore the breathtaking beauty of nature in this stunning documentary featuring wildlife from around the world.',
    category: 'Entertainment',
    videoUrl: 'https://sample-videos.com/zip/10/mp4/SampleVideo_1280x720_1mb.mp4',
    thumbnailUrl: 'https://images.unsplash.com/photo-1441974231531-c6227db76b6e?w=400&h=300&fit=crop',
    duration: '15:30',
    views: 125000,
    downloads: 8500,
    createdAt: new Date('2024-01-15'),
    updatedAt: new Date('2024-01-15'),
  },
  {
    id: 'video_2',
    title: 'Learn JavaScript in 30 Minutes',
    description: 'Master the fundamentals of JavaScript programming with this comprehensive tutorial for beginners.',
    category: 'Education',
    videoUrl: 'https://sample-videos.com/zip/10/mp4/SampleVideo_1280x720_2mb.mp4',
    thumbnailUrl: 'https://images.unsplash.com/photo-1516321318423-f06f85e504b3?w=400&h=300&fit=crop',
    duration: '30:00',
    views: 89000,
    downloads: 12000,
    createdAt: new Date('2024-01-20'),
    updatedAt: new Date('2024-01-20'),
  },
  {
    id: 'video_3',
    title: 'Epic Gaming Montage 2024',
    description: 'Watch the most incredible gaming moments from top players around the world in this action-packed montage.',
    category: 'Gaming',
    videoUrl: 'https://sample-videos.com/zip/10/mp4/SampleVideo_1280x720_5mb.mp4',
    thumbnailUrl: 'https://images.unsplash.com/photo-1493711662062-fa541adb3fc8?w=400&h=300&fit=crop',
    duration: '8:45',
    views: 250000,
    downloads: 18000,
    createdAt: new Date('2024-01-25'),
    updatedAt: new Date('2024-01-25'),
  },
  {
    id: 'video_4',
    title: 'Cooking Masterclass: Italian Cuisine',
    description: 'Learn to cook authentic Italian dishes with professional chef techniques and secret recipes.',
    category: 'Entertainment',
    videoUrl: 'https://sample-videos.com/zip/10/mp4/SampleVideo_1280x720_10mb.mp4',
    thumbnailUrl: 'https://images.unsplash.com/photo-1556909114-f6e7ad7d3136?w=400&h=300&fit=crop',
    duration: '45:20',
    views: 67000,
    downloads: 4200,
    createdAt: new Date('2024-02-01'),
    updatedAt: new Date('2024-02-01'),
  },
  {
    id: 'video_5',
    title: 'Space Exploration: Mars Mission',
    description: 'Discover the latest developments in space exploration and the upcoming Mars colonization mission.',
    category: 'Technology',
    videoUrl: 'https://sample-videos.com/zip/10/mp4/SampleVideo_1280x720_1mb.mp4',
    thumbnailUrl: 'https://images.unsplash.com/photo-1446776877081-d282a0f896e2?w=400&h=300&fit=crop',
    duration: '22:15',
    views: 180000,
    downloads: 9500,
    createdAt: new Date('2024-02-05'),
    updatedAt: new Date('2024-02-05'),
  },
  {
    id: 'video_6',
    title: 'Music Production Tutorial',
    description: 'Step-by-step guide to creating professional music using modern digital audio workstations.',
    category: 'Music',
    videoUrl: 'https://sample-videos.com/zip/10/mp4/SampleVideo_1280x720_2mb.mp4',
    thumbnailUrl: 'https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=400&h=300&fit=crop',
    duration: '35:40',
    views: 95000,
    downloads: 6800,
    createdAt: new Date('2024-02-10'),
    updatedAt: new Date('2024-02-10'),
  },
  {
    id: 'video_7',
    title: 'Elegant Angel: Tiny Brunette Cutie',
    description: 'Premium adult content featuring elegant performances and high-quality production.',
    category: 'Entertainment',
    videoUrl: 'https://sample-videos.com/zip/10/mp4/SampleVideo_1280x720_1mb.mp4',
    thumbnailUrl: 'https://images.unsplash.com/photo-1517841905240-472988babdf9?w=400&h=300&fit=crop',
    duration: '8:00',
    views: 9374,
    downloads: 2778,
    createdAt: new Date('2024-02-01'),
    updatedAt: new Date('2024-02-01'),
    externalUrl: 'https://www.xnxx.com/video-x4xdzfd/elegant_angel_tiny_brunette_cutie_loves_anal_sex',
  },
  {
    id: 'video_8',
    title: 'Petite Tattooed Babe Performance',
    description: 'Exclusive content featuring petite performers with artistic elements.',
    category: 'Entertainment',
    videoUrl: 'https://sample-videos.com/zip/10/mp4/SampleVideo_1280x720_2mb.mp4',
    thumbnailUrl: 'https://images.unsplash.com/photo-1534528741775-53994a69daeb?w=400&h=300&fit=crop',
    duration: '12:30',
    views: 15600,
    downloads: 4200,
    createdAt: new Date('2024-02-02'),
    updatedAt: new Date('2024-02-02'),
    externalUrl: 'https://www.xnxx.com/video-y5qvl07/elegant_angel_petite_tattooed_babe_gets_fucked_in_every_hole',
  },
  {
    id: 'video_9',
    title: 'Tiny Blonde Jane Wilde Feature',
    description: 'Professional adult entertainment with high production values.',
    category: 'Entertainment',
    videoUrl: 'https://sample-videos.com/zip/10/mp4/SampleVideo_1280x720_5mb.mp4',
    thumbnailUrl: 'https://images.unsplash.com/photo-1524504388940-b1c1722653e1?w=400&h=300&fit=crop',
    duration: '15:45',
    views: 22300,
    downloads: 6800,
    createdAt: new Date('2024-02-03'),
    updatedAt: new Date('2024-02-03'),
    externalUrl: 'https://www.xnxx.com/video-omcht69/tiny_blonde_jane_wilde_fucked_in_the_ass_by_a_big_cock',
  },
  {
    id: 'video_10',
    title: 'Sexy Babe Hardcore Session',
    description: 'Intense adult content with professional performers.',
    category: 'Entertainment',
    videoUrl: 'https://sample-videos.com/zip/10/mp4/SampleVideo_1280x720_10mb.mp4',
    thumbnailUrl: 'https://images.unsplash.com/photo-1506863530036-1efeddceb993?w=400&h=300&fit=crop',
    duration: '18:20',
    views: 18900,
    downloads: 5200,
    createdAt: new Date('2024-02-04'),
    updatedAt: new Date('2024-02-04'),
    externalUrl: 'https://www.xnxx.com/video-1c2c1hb2/sexy_babe_swallowed_big_cock_and_jane_wilde_enjoyed_hardcore_sex',
  },
  {
    id: 'video_11',
    title: 'Teen Jane Wilde Nude Session',
    description: 'Exclusive teen content with artistic photography.',
    category: 'Entertainment',
    videoUrl: 'https://sample-videos.com/zip/10/mp4/SampleVideo_1280x720_1mb.mp4',
    thumbnailUrl: 'https://images.unsplash.com/photo-1517841905240-472988babdf9?w=400&h=300&fit=crop',
    duration: '22:15',
    views: 31200,
    downloads: 8900,
    createdAt: new Date('2024-02-05'),
    updatedAt: new Date('2024-02-05'),
    externalUrl: 'https://www.xnxx.com/video-1a0lqtb9/sexy_small_tits_teen_jane_wilde_posed_totally_naked_and_revealed_her_beautiful_big_rounded_booty',
  },
  {
    id: 'video_12',
    title: 'Rough Sex with Jane Wilde',
    description: 'Intense adult entertainment featuring popular performer.',
    category: 'Entertainment',
    videoUrl: 'https://sample-videos.com/zip/10/mp4/SampleVideo_1280x720_2mb.mp4',
    thumbnailUrl: 'https://images.unsplash.com/photo-1534528741775-53994a69daeb?w=400&h=300&fit=crop',
    duration: '25:30',
    views: 27800,
    downloads: 7200,
    createdAt: new Date('2024-02-06'),
    updatedAt: new Date('2024-02-06'),
    externalUrl: 'https://www.xnxx.com/video-1btr6r6a/sexy_babe_jane_wilde_swallowed_big_dick_and_enjoyed_rough_sex_with_her_boyfriend_and_horny_babe_really_liked_hot_sex_after_she_gave_a_blowjob',
  },
  {
    id: 'video_13',
    title: 'PervCity Jane Wilde Ass Pounded',
    description: 'Professional adult content with high-quality production.',
    category: 'Entertainment',
    videoUrl: 'https://sample-videos.com/zip/10/mp4/SampleVideo_1280x720_5mb.mp4',
    thumbnailUrl: 'https://images.unsplash.com/photo-1524504388940-b1c1722653e1?w=400&h=300&fit=crop',
    duration: '20:15',
    views: 19800,
    downloads: 5600,
    createdAt: new Date('2024-02-07'),
    updatedAt: new Date('2024-02-07'),
    externalUrl: 'https://www.xnxx.com/video-ygyojeb/pervcity_jane_wilde_ass_pounded',
  },
  {
    id: 'video_14',
    title: 'Sexy Latin Babe Anal Session',
    description: 'Exclusive Latin performer content with intense scenes.',
    category: 'Entertainment',
    videoUrl: 'https://sample-videos.com/zip/10/mp4/SampleVideo_1280x720_10mb.mp4',
    thumbnailUrl: 'https://images.unsplash.com/photo-1506863530036-1efeddceb993?w=400&h=300&fit=crop',
    duration: '16:45',
    views: 23400,
    downloads: 6800,
    createdAt: new Date('2024-02-08'),
    updatedAt: new Date('2024-02-08'),
    externalUrl: 'https://www.xnxx.com/video-1f28xzc8/sexy_latin_babe_swallowed_big_cock_and_teen_enjoyed_rough_anal_sex',
  },
  {
    id: 'video_15',
    title: 'Extra Small Tiny Babe Feature',
    description: 'Petite performer content with artistic elements.',
    category: 'Entertainment',
    videoUrl: 'https://sample-videos.com/zip/10/mp4/SampleVideo_1280x720_1mb.mp4',
    thumbnailUrl: 'https://images.unsplash.com/photo-1517841905240-472988babdf9?w=400&h=300&fit=crop',
    duration: '14:30',
    views: 26700,
    downloads: 7800,
    createdAt: new Date('2024-02-09'),
    updatedAt: new Date('2024-02-09'),
    externalUrl: 'https://www.xnxx.com/video-m2t5f4a/exxxtra_small_-_tiny_babe_jane_wilde_deeply_penetrated',
  },
  {
    id: 'video_16',
    title: 'Petite Brunette with Mick Blue',
    description: 'Professional adult entertainment featuring popular male performer.',
    category: 'Entertainment',
    videoUrl: 'https://sample-videos.com/zip/10/mp4/SampleVideo_1280x720_2mb.mp4',
    thumbnailUrl: 'https://images.unsplash.com/photo-1534528741775-53994a69daeb?w=400&h=300&fit=crop',
    duration: '19:20',
    views: 18900,
    downloads: 5200,
    createdAt: new Date('2024-02-10'),
    updatedAt: new Date('2024-02-10'),
    externalUrl: 'https://www.xnxx.com/video-vicnd3f/petite_brunette_gets_her_ass_fucked_by_mick_blue',
  },
  {
    id: 'video_17',
    title: 'Analized Tiny Brunette Session',
    description: 'Intense adult content with petite performer.',
    category: 'Entertainment',
    videoUrl: 'https://sample-videos.com/zip/10/mp4/SampleVideo_1280x720_5mb.mp4',
    thumbnailUrl: 'https://images.unsplash.com/photo-1524504388940-b1c1722653e1?w=400&h=300&fit=crop',
    duration: '17:45',
    views: 21200,
    downloads: 6100,
    createdAt: new Date('2024-02-11'),
    updatedAt: new Date('2024-02-11'),
    externalUrl: 'https://www.xnxx.com/video-18hwctaf/analized_-_tiny_brunette_babe_jane_wilde_loves_a_rough_ass_pounding',
  },
  {
    id: 'video_18',
    title: 'Jane Wilde Lesbian Session',
    description: 'Exclusive lesbian content with professional performers.',
    category: 'Entertainment',
    videoUrl: 'https://sample-videos.com/zip/10/mp4/SampleVideo_1280x720_10mb.mp4',
    thumbnailUrl: 'https://images.unsplash.com/photo-1506863530036-1efeddceb993?w=400&h=300&fit=crop',
    duration: '24:30',
    views: 29800,
    downloads: 8500,
    createdAt: new Date('2024-02-12'),
    updatedAt: new Date('2024-02-12'),
    externalUrl: 'https://www.xnxx.com/video-1dmsqnf1/hot_jane_wilde_having_sex_with_horny_big_tits_milf_lesbian_after_hot_kissing_and_passion_foreplay',
  },
  {
    id: 'video_19',
    title: 'Jane Wilde Playboy Striptease',
    description: 'Artistic striptease content with professional photography.',
    category: 'Entertainment',
    videoUrl: 'https://sample-videos.com/zip/10/mp4/SampleVideo_1280x720_1mb.mp4',
    thumbnailUrl: 'https://images.unsplash.com/photo-1517841905240-472988babdf9?w=400&h=300&fit=crop',
    duration: '13:20',
    views: 25600,
    downloads: 7200,
    createdAt: new Date('2024-02-13'),
    updatedAt: new Date('2024-02-13'),
    externalUrl: 'https://www.xnxx.com/video-1c55yjcb/sexy_babe_jane_wilde_exposed_hot_body_after_striptease_for_playboy',
  },
  {
    id: 'video_20',
    title: 'Valentines Day Surprise Fuck',
    description: 'Romantic adult content with surprise elements.',
    category: 'Entertainment',
    videoUrl: 'https://sample-videos.com/zip/10/mp4/SampleVideo_1280x720_2mb.mp4',
    thumbnailUrl: 'https://images.unsplash.com/photo-1534528741775-53994a69daeb?w=400&h=300&fit=crop',
    duration: '21:15',
    views: 18900,
    downloads: 5200,
    createdAt: new Date('2024-02-14'),
    updatedAt: new Date('2024-02-14'),
    externalUrl: 'https://www.xnxx.com/video-w1db3f6/jane_wilde_receives_surprise_valentines_day_fuck_from_her_lover',
  },
  {
    id: 'video_21',
    title: 'DP Diva Jane Wilde Rough DP',
    description: 'Intense double penetration content with popular performer.',
    category: 'Entertainment',
    videoUrl: 'https://sample-videos.com/zip/10/mp4/SampleVideo_1280x720_5mb.mp4',
    thumbnailUrl: 'https://images.unsplash.com/photo-1524504388940-b1c1722653e1?w=400&h=300&fit=crop',
    duration: '26:45',
    views: 31200,
    downloads: 8900,
    createdAt: new Date('2024-02-15'),
    updatedAt: new Date('2024-02-15'),
    externalUrl: 'https://www.xnxx.com/video-15w63vec/dp_diva_jane_wilde_rough_dp_and_dap',
  },
  {
    id: 'video_22',
    title: 'Redhead Teen Lory Jane Anal',
    description: 'Exclusive teen content with redhead performer.',
    category: 'Entertainment',
    videoUrl: 'https://sample-videos.com/zip/10/mp4/SampleVideo_1280x720_10mb.mp4',
    thumbnailUrl: 'https://images.unsplash.com/photo-1506863530036-1efeddceb993?w=400&h=300&fit=crop',
    duration: '18:30',
    views: 22300,
    downloads: 6800,
    createdAt: new Date('2024-02-16'),
    updatedAt: new Date('2024-02-16'),
    externalUrl: 'https://www.xnxx.com/video-r4dms0e/redhead_teen_babe_lory_jane_gets_anal',
  },
  {
    id: 'video_23',
    title: 'Your Local Video 1',
    description: 'This is a locally added video that works on Vercel.',
    category: 'Entertainment',
    videoUrl: 'https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4',
    thumbnailUrl: 'https://images.unsplash.com/photo-1517841905240-472988babdf9?w=400&h=300&fit=crop',
    duration: '9:56',
    views: 15000,
    downloads: 3000,
    createdAt: new Date('2024-02-17'),
    updatedAt: new Date('2024-02-17'),
  },
  {
    id: 'video_24',
    title: 'Your Local Video 2',
    description: 'Another locally added video with external hosting.',
    category: 'Entertainment',
    videoUrl: 'https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ElephantsDream.mp4',
    thumbnailUrl: 'https://images.unsplash.com/photo-1534528741775-53994a69daeb?w=400&h=300&fit=crop',
    duration: '10:53',
    views: 12000,
    downloads: 2500,
    createdAt: new Date('2024-02-18'),
    updatedAt: new Date('2024-02-18'),
  },
];

export const demoAds: AdsterraAd[] = [
  // Banner Ads
  {
    id: 'banner_1',
    type: 'banner',
    title: 'Premium Streaming Service',
    description: 'Get unlimited access to thousands of movies and shows',
    url: 'https://example.com/streaming-service',
    imageUrl: 'https://images.unsplash.com/photo-1574375927938-d5a98e8ffe85?w=800&h=200&fit=crop',
    isActive: true,
    clickCount: 1250,
    createdAt: new Date('2024-01-01'),
  },
  {
    id: 'banner_2',
    type: 'banner',
    title: 'Online Learning Platform',
    description: 'Master new skills with expert-led courses',
    url: 'https://example.com/learning-platform',
    imageUrl: 'https://images.unsplash.com/photo-1522202176988-66273c2fd55f?w=800&h=200&fit=crop',
    isActive: true,
    clickCount: 890,
    createdAt: new Date('2024-01-05'),
  },
  
  // Native Ads
  {
    id: 'native_1',
    type: 'native',
    title: 'Gaming Accessories Store',
    description: 'High-quality gaming peripherals for professional gamers',
    url: 'https://example.com/gaming-store',
    imageUrl: 'https://images.unsplash.com/photo-1606144042614-b2417e99c4e3?w=200&h=200&fit=crop',
    isActive: true,
    clickCount: 2100,
    createdAt: new Date('2024-01-10'),
  },
  {
    id: 'native_2',
    type: 'native',
    title: 'Fitness App Premium',
    description: 'Transform your body with personalized workout plans',
    url: 'https://example.com/fitness-app',
    imageUrl: 'https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?w=200&h=200&fit=crop',
    isActive: true,
    clickCount: 1750,
    createdAt: new Date('2024-01-15'),
  },
  {
    id: 'native_3',
    type: 'native',
    title: 'Tech Gadgets Hub',
    description: 'Latest technology gadgets and accessories',
    url: 'https://example.com/tech-gadgets',
    imageUrl: 'https://images.unsplash.com/photo-1518717757756-8e0ec6d4a3a0?w=200&h=200&fit=crop',
    isActive: true,
    clickCount: 3200,
    createdAt: new Date('2024-01-20'),
  },
  
  // Smart Direct Links - Adsterra Integration
  {
    id: 'smart_1',
    type: 'smart_direct_link',
    title: 'Premium Gaming Experience',
    description: 'Discover amazing gaming content and exclusive offers',
    url: 'https://www.effectivegatecpm.com/zzp52zmx?key=8f7d2827bbc3ed2e669873b5a864c6f9',
    imageUrl: 'https://images.unsplash.com/photo-1493711662062-fa541adb3fc8?w=300&h=200&fit=crop',
    isActive: true,
    clickCount: 4500,
    createdAt: new Date('2024-01-25'),
  },
  {
    id: 'smart_2',
    type: 'smart_direct_link',
    title: 'Exclusive Entertainment Deals',
    description: 'Get access to premium entertainment content',
    url: 'https://www.effectivegatecpm.com/vvumg5fqg2?key=1cb75527f5edcd5929e57a06e1d27df6',
    imageUrl: 'https://images.unsplash.com/photo-1574375927938-d5a98e8ffe85?w=300&h=200&fit=crop',
    isActive: true,
    clickCount: 3800,
    createdAt: new Date('2024-02-01'),
  },
  {
    id: 'smart_3',
    type: 'smart_direct_link',
    title: 'Tech Innovation Hub',
    description: 'Explore the latest technology trends and innovations',
    url: 'https://www.effectivegatecpm.com/byxrhrg3?key=c3543a8bba23c39fe33fc01d1ed4d260',
    imageUrl: 'https://images.unsplash.com/photo-1516321318423-f06f85e504b3?w=300&h=200&fit=crop',
    isActive: true,
    clickCount: 2900,
    createdAt: new Date('2024-02-05'),
  },
  {
    id: 'smart_4',
    type: 'smart_direct_link',
    title: 'Lifestyle & Fashion',
    description: 'Discover the latest trends in fashion and lifestyle',
    url: 'https://www.effectivegatecpm.com/ui2r75xv?key=8a6fef106b36cb213591cff574c778e2',
    imageUrl: 'https://images.unsplash.com/photo-1441986300917-64674bd600d8?w=300&h=200&fit=crop',
    isActive: true,
    clickCount: 2100,
    createdAt: new Date('2024-02-10'),
  },
  {
    id: 'smart_5',
    type: 'smart_direct_link',
    title: 'Health & Fitness Solutions',
    description: 'Transform your health with premium fitness programs',
    url: 'https://www.effectivegatecpm.com/pmapdftgc?key=39235e43e4d81ee4fe645e7c24b48b1b',
    imageUrl: 'https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?w=300&h=200&fit=crop',
    isActive: true,
    clickCount: 1800,
    createdAt: new Date('2024-02-15'),
  },
  {
    id: 'smart_6',
    type: 'smart_direct_link',
    title: 'Business & Finance Tools',
    description: 'Boost your business with professional financial tools',
    url: 'https://www.effectivegatecpm.com/b10fnb3rd?key=f923d62d96f4719b7797e881a42b8fb0',
    imageUrl: 'https://images.unsplash.com/photo-1551288049-bebda4e38f71?w=300&h=200&fit=crop',
    isActive: true,
    clickCount: 1600,
    createdAt: new Date('2024-02-20'),
  },
  {
    id: 'smart_7',
    type: 'smart_direct_link',
    title: 'Travel & Adventure',
    description: 'Plan your next adventure with exclusive travel deals',
    url: 'https://www.effectivegatecpm.com/a51535dr?key=66e6ad1660b40bb8f64c42887ec8ebb4',
    imageUrl: 'https://images.unsplash.com/photo-1488646953014-85cb44e25828?w=300&h=200&fit=crop',
    isActive: true,
    clickCount: 1400,
    createdAt: new Date('2024-02-25'),
  },
  {
    id: 'smart_8',
    type: 'smart_direct_link',
    title: 'Education & Learning',
    description: 'Expand your knowledge with premium educational content',
    url: 'https://www.effectivegatecpm.com/ycz1ni72n4?key=c807520bd1ea3746dc694effb2d3eebb',
    imageUrl: 'https://images.unsplash.com/photo-1522202176988-66273c2fd55f?w=300&h=200&fit=crop',
    isActive: true,
    clickCount: 1200,
    createdAt: new Date('2024-03-01'),
  },
  {
    id: 'smart_9',
    type: 'smart_direct_link',
    title: 'Home & Garden',
    description: 'Create your dream home with premium home solutions',
    url: 'https://www.effectivegatecpm.com/msrc48a3?key=448ee3d229c4064ce805ee282a71254a',
    imageUrl: 'https://images.unsplash.com/photo-1586023492125-27b2c045efd7?w=300&h=200&fit=crop',
    isActive: true,
    clickCount: 1000,
    createdAt: new Date('2024-03-05'),
  },
  {
    id: 'smart_10',
    type: 'smart_direct_link',
    title: 'Premium Content Hub',
    description: 'Access exclusive premium content and special offers',
    url: 'https://www.effectivegatecpm.com/pahd2aakkt?key=29cea4f7e122e7206cc4d7e17343fdc6',
    imageUrl: 'https://images.unsplash.com/photo-1557804506-669a67965ba0?w=300&h=200&fit=crop',
    isActive: true,
    clickCount: 800,
    createdAt: new Date('2024-03-10'),
  },
];

// Function to fetch local videos
async function getLocalVideos() {
  try {
    const response = await fetch('/api/videos/local');
    if (response.ok) {
      return await response.json();
    }
  } catch (error) {
    console.error('Error fetching local videos:', error);
  }
  return [];
}

// Function to get all videos (local + demo + uploaded)
async function getAllVideos() {
  try {
    // Get local videos first
    const localVideos = await getLocalVideos();
    
    // Get uploaded videos from localStorage
    const uploadedVideos = getUploadedVideos();
    
    // Combine all videos
    const allVideos = [...localVideos, ...uploadedVideos, ...demoVideos];
    
    // Sort by creation date (newest first)
    return allVideos.sort((a, b) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime());
  } catch (error) {
    console.error('Error fetching all videos:', error);
    // Return demo videos as fallback
    return demoVideos;
  }
}

// Function to get video by ID with fallback
async function getVideoByIdWithFallback(id: string) {
  try {
    // First try to get from all videos
    const allVideos = await getAllVideos();
    const video = allVideos.find(v => v.id === id);
    
    if (video) {
      // Check if it's a local video and if the URL is accessible
      if (video.videoUrl.startsWith('/api/video/')) {
        try {
          // Test if the video URL is accessible
          const response = await fetch(video.videoUrl, { method: 'HEAD' });
          if (!response.ok) {
            console.warn(`Local video not accessible: ${video.videoUrl}, using demo video instead`);
            // Return a demo video instead
            return demoVideos[0] || null;
          }
        } catch (error) {
          console.warn(`Error checking video accessibility: ${video.videoUrl}, using demo video instead`);
          // Return a demo video instead
          return demoVideos[0] || null;
        }
      }
      
      // Check if the video URL is a valid video file URL
      if (!video.videoUrl.endsWith('.mp4') && !video.videoUrl.includes('sample-videos.com')) {
        console.warn(`Invalid video URL format: ${video.videoUrl}, using demo video instead`);
        // Return a demo video instead
        return demoVideos[0] || null;
      }
      
      // If video has external URL, use demo video for playback but keep external URL
      if (video.externalUrl && video.externalUrl.includes('xnxx.com')) {
        console.log(`Video has external XNXX URL, using demo video for playback: ${video.externalUrl}`);
        // Return the video but with a working demo video URL - don't redirect
        return {
          ...video,
          videoUrl: 'https://sample-videos.com/zip/10/mp4/SampleVideo_1280x720_1mb.mp4'
        };
      }
      
      return video;
    }
    
    return null;
  } catch (error) {
    console.error('Error fetching video by ID:', error);
    return demoVideos[0] || null;
  }
}

// Function to get uploaded videos from localStorage
function getUploadedVideos(): Video[] {
  try {
    if (typeof window !== 'undefined') {
      const uploaded = localStorage.getItem('uploadedVideos');
      return uploaded ? JSON.parse(uploaded) : [];
    }
  } catch (error) {
    console.error('Error getting uploaded videos:', error);
  }
  return [];
}

// Function to add new video
function addNewVideo(video: Omit<Video, 'id' | 'createdAt' | 'updatedAt'>): Video {
  const newVideo: Video = {
    ...video,
    id: `uploaded_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,
    createdAt: new Date(),
    updatedAt: new Date(),
  };
  
  try {
    if (typeof window !== 'undefined') {
      const uploadedVideos = getUploadedVideos();
      uploadedVideos.unshift(newVideo); // Add to beginning
      localStorage.setItem('uploadedVideos', JSON.stringify(uploadedVideos));
      
      // Trigger custom event to refresh video lists
      window.dispatchEvent(new CustomEvent('videoUpdated'));
    }
  } catch (error) {
    console.error('Error saving uploaded video:', error);
  }
  
  return newVideo;
}

// Function to update video
function updateVideo(videoId: string, updates: Partial<Video>): boolean {
  try {
    if (typeof window !== 'undefined') {
      const uploadedVideos = getUploadedVideos();
      const index = uploadedVideos.findIndex(v => v.id === videoId);
      
      if (index !== -1) {
        uploadedVideos[index] = {
          ...uploadedVideos[index],
          ...updates,
          updatedAt: new Date(),
        };
        localStorage.setItem('uploadedVideos', JSON.stringify(uploadedVideos));
        
        // Trigger custom event to refresh video lists
        window.dispatchEvent(new CustomEvent('videoUpdated'));
        return true;
      }
    }
  } catch (error) {
    console.error('Error updating video:', error);
  }
  return false;
}

// Function to delete video
function deleteVideo(videoId: string): boolean {
  try {
    if (typeof window !== 'undefined') {
      const uploadedVideos = getUploadedVideos();
      const filteredVideos = uploadedVideos.filter(v => v.id !== videoId);
      localStorage.setItem('uploadedVideos', JSON.stringify(filteredVideos));
      
      // Trigger custom event to refresh video lists
      window.dispatchEvent(new CustomEvent('videoUpdated'));
      return true;
    }
  } catch (error) {
    console.error('Error deleting video:', error);
  }
  return false;
}

// Mock API functions for demo data
export const mockApi = {
  getVideos: async () => {
    // Get all videos (local + uploaded + demo)
    return await getAllVideos();
  },
  getVideoById: async (id: string) => {
    // Get video by ID with fallback
    return await getVideoByIdWithFallback(id);
  },
  addVideo: (video: Omit<Video, 'id' | 'createdAt' | 'updatedAt'>) => {
    return Promise.resolve(addNewVideo(video));
  },
  updateVideo: (id: string, updates: Partial<Video>) => {
    return Promise.resolve(updateVideo(id, updates));
  },
  deleteVideo: (id: string) => {
    return Promise.resolve(deleteVideo(id));
  },
  getBannerAds: () => Promise.resolve(demoAds.filter(ad => ad.type === 'banner')),
  getNativeAds: () => Promise.resolve(demoAds.filter(ad => ad.type === 'native')),
  getSmartDirectLinks: () => Promise.resolve(demoAds.filter(ad => ad.type === 'smart_direct_link')),
  incrementVideoViews: (id: string) => {
    // Update views in all video sources
    const video = demoVideos.find(v => v.id === id);
    if (video) video.views++;
    
    // Also update in uploaded videos
    updateVideo(id, { views: (video?.views || 0) + 1 });
    return Promise.resolve();
  },
  incrementVideoDownloads: (id: string) => {
    // Update downloads in all video sources
    const video = demoVideos.find(v => v.id === id);
    if (video) video.downloads++;
    
    // Also update in uploaded videos
    updateVideo(id, { downloads: (video?.downloads || 0) + 1 });
    return Promise.resolve();
  },
  incrementAdClicks: (id: string) => {
    const ad = demoAds.find(a => a.id === id);
    if (ad) ad.clickCount++;
    return Promise.resolve();
  },
};
